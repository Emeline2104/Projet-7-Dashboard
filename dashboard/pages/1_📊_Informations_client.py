# 1_üìä_Informations_client.py
import streamlit as st
import requests

# Environnement local
#api_url = "http://127.0.0.1:5001"
# Environnement Heroku
api_url = "https://projet-7-38cdf763d118.herokuapp.com/"

# Check que la cl√© 'client_id' est dans la session state
if 'client_id' not in st.session_state:
    st.session_state.client_id = None

# R√©cup√©ration de l'ID client de la session state
client_id = st.session_state.client_id


# a bouger
correspondance_dict_application_info = {
    'SK_ID_CURR': {'Titre': 'ID du pr√™t dans notre √©chantillon', 'Unit√©': ''},
    'TARGET': {'Titre': 'Variable cible', "Description": "1 - Client en difficult√© de paiement : retard de paiement de plus de X jours sur au moins l'une des Y premi√®res √©ch√©ances du pr√™t dans notre √©chantillon, 0 - tous les autres cas", 'Unit√©': ''},
    'NAME_CONTRACT_TYPE': {'Titre': 'Type de contrat de pr√™t', 'Unit√©': ''},
    'CODE_GENDER': {'Titre': 'Genre du client', 'Unit√©': ''},
    'FLAG_OWN_CAR': {'Titre': "Possession d'une voiture", 'Unit√©': ''},
    'FLAG_OWN_REALTY': {'Titre': "Possession d'un bien immobilier", 'Unit√©': ''},
    'CNT_CHILDREN': {'Titre': "Nombre d'enfants", 'Unit√©': ''},
    'AMT_INCOME_TOTAL': {'Titre': 'Revenu total', 'Unit√©': 'Monnaie'},
    'AMT_CREDIT': {'Titre': 'Montant du cr√©dit', 'Unit√©': 'Monnaie'},
    'AMT_ANNUITY': {'Titre': 'Annuit√© du pr√™t', 'Unit√©': 'Monnaie'},
    'AMT_GOODS_PRICE': {'Titre': 'Prix des biens', 'Description': 'Pour les pr√™ts √† la consommation, c\'est le prix des biens pour lesquels le pr√™t est accord√©', 'Unit√©': 'Monnaie'},
    'NAME_TYPE_SUITE': {'Titre': 'Personne accompagnant le client lors de la demande de pr√™t', 'Unit√©': ''},
    'NAME_INCOME_TYPE': {'Titre': 'Type de revenu du client', 'Unit√©': ''},
    'NAME_EDUCATION_TYPE': {'Titre': "Niveau d'√©ducation le plus √©lev√© atteint par le client", 'Unit√©': ''},
    'NAME_FAMILY_STATUS': {'Titre': 'Statut familial du client', 'Unit√©': ''},
    'NAME_HOUSING_TYPE': {'Titre': 'Situation de logement du client', 'Unit√©': ''},
    'REGION_POPULATION_RELATIVE': {'Titre': 'Population normalis√©e de la r√©gion o√π vit le client', 'Unit√©': ''},
    'DAYS_BIRTH': {'Titre': '√Çge du client en jours au moment de la demande', 'Unit√©': 'Jours'},
    'DAYS_EMPLOYED': {'Titre': 'Nombre de jours avant la demande o√π la personne a commenc√© son emploi actuel', 'Unit√©': 'Jours'},
    'DAYS_REGISTRATION': {'Titre': 'Nombre de jours avant la demande o√π le client a chang√© son enregistrement', 'Unit√©': 'Jours'},
    'DAYS_ID_PUBLISH': {'Titre': "Nombre de jours avant la demande o√π le client a chang√© le document d'identit√© avec lequel il a fait la demande de pr√™t", 'Unit√©': 'Jours'},
    'OWN_CAR_AGE': {'Titre': "√Çge de la voiture du client", 'Unit√©': 'Ann√©es'},
    'FLAG_MOBIL': {'Titre': 'Le client a-t-il fourni un t√©l√©phone portable', 'Unit√©': ''},
    'FLAG_EMP_PHONE': {'Titre': 'Le client a-t-il fourni un t√©l√©phone professionnel', 'Unit√©': ''},
    'FLAG_WORK_PHONE': {'Titre': 'Le client a-t-il fourni un t√©l√©phone domicile', 'Unit√©': ''},
    'FLAG_CONT_MOBILE': {'Titre': 'Le t√©l√©phone portable √©tait-il joignable', 'Unit√©': ''},
    'FLAG_PHONE': {'Titre': 'Le client a-t-il fourni un t√©l√©phone domicile', 'Unit√©': ''},
    'FLAG_EMAIL': {'Titre': 'Le client a-t-il fourni une adresse e-mail', 'Unit√©': ''},
    'OCCUPATION_TYPE': {'Titre': "Type d'occupation du client", 'Unit√©': ''},
    'CNT_FAM_MEMBERS': {'Titre': 'Nombre de membres de la famille', 'Unit√©': ''},
    'REGION_RATING_CLIENT': {'Titre': 'Notre √©valuation de la r√©gion o√π vit le client', 'Unit√©': ''},
    'REGION_RATING_CLIENT_W_CITY': {'Titre': "Notre √©valuation de la r√©gion o√π vit le client en tenant compte de la ville", 'Unit√©': ''},
    'WEEKDAY_APPR_PROCESS_START': {'Titre': 'Jour de la semaine o√π le client a fait la demande de pr√™t', 'Unit√©': ''},
    'HOUR_APPR_PROCESS_START': {'Titre': '√Ä quelle heure approximativement le client a-t-il fait la demande de pr√™t', 'Unit√©': 'Heures'},
    'REG_REGION_NOT_LIVE_REGION': {'Titre': "Drapeau si l'adresse permanente du client ne correspond pas √† l'adresse de contact (1 = diff√©rent, 0 = m√™me, au niveau r√©gional)", 'Unit√©': ''},
    'REG_REGION_NOT_WORK_REGION': {'Titre': "Drapeau si l'adresse permanente du client ne correspond pas √† l'adresse professionnelle (1 = diff√©rent, 0 = m√™me, au niveau r√©gional)", 'Unit√©': ''},
    'LIVE_REGION_NOT_WORK_REGION': {'Titre': "Drapeau si l'adresse de contact du client ne correspond pas √† l'adresse professionnelle (1 = diff√©rent, 0 = m√™me, au niveau r√©gional)", 'Unit√©': ''},
    'REG_CITY_NOT_LIVE_CITY': {'Titre': "Drapeau si l'adresse permanente du client ne correspond pas √† l'adresse de contact (1 = diff√©rent, 0 = m√™me, au niveau de la ville)", 'Unit√©': ''},
    'REG_CITY_NOT_WORK_CITY': {'Titre': "Drapeau si l'adresse permanente du client ne correspond pas √† l'adresse professionnelle (1 = diff√©rent, 0 = m√™me, au niveau de la ville)", 'Unit√©': ''},
    'LIVE_CITY_NOT_WORK_CITY': {'Titre': "Drapeau si l'adresse de contact du client ne correspond pas √† l'adresse professionnelle (1 = diff√©rent, 0 = m√™me, au niveau de la ville)", 'Unit√©': ''},
    'ORGANIZATION_TYPE': {'Titre': "Type d'organisation o√π le client travaille", 'Unit√©': ''},
    'EXT_SOURCE_1': {'Titre': 'Score normalis√© √† partir de la source de donn√©es externe 1', 'Unit√©': ''},
    'EXT_SOURCE_2': {'Titre': 'Score normalis√© √† partir de la source de donn√©es externe 2', 'Unit√©': ''},
    'EXT_SOURCE_3': {'Titre': 'Score normalis√© √† partir de la source de donn√©es externe 3', 'Unit√©': ''},
    'APARTMENTS_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille moyenne de l\'appartement', 'Unit√©': ''},
    'BASEMENTAREA_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Surface moyenne du sous-sol', 'Unit√©': ''},
    'YEARS_BEGINEXPLUATATION_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': '√Çge moyen du d√©but de l\'exploitation', 'Unit√©': ''},
    'YEARS_BUILD_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': '√Çge moyen du b√¢timent', 'Unit√©': ''},
    'COMMONAREA_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille moyenne de la zone commune', 'Unit√©': ''},
    'ELEVATORS_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre moyen d\'ascenseurs', 'Unit√©': ''},
    'ENTRANCES_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre moyen d\'entr√©es', 'Unit√©': ''},
    'FLOORSMAX_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre moyen d\'√©tages maximum', 'Unit√©': ''},
    'FLOORSMIN_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre moyen d\'√©tages minimum', 'Unit√©': ''},
    'LANDAREA_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Surface moyenne du terrain', 'Unit√©': ''},
    'LIVINGAPARTMENTS_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille moyenne des appartements', 'Unit√©': ''},
    'LIVINGAREA_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille moyenne de la surface habitable', 'Unit√©': ''},
    'NONLIVINGAPARTMENTS_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre moyen d\'appartements non habitables', 'Unit√©': ''},
    'NONLIVINGAREA_AVG': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille moyenne de la zone non habitable', 'Unit√©': ''},
    'APARTMENTS_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille modale de l\'appartement', 'Unit√©': ''},
    'BASEMENTAREA_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Surface modale du sous-sol', 'Unit√©': ''},
    'YEARS_BEGINEXPLUATATION_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': '√Çge modal du d√©but de l\'exploitation', 'Unit√©': ''},
    'YEARS_BUILD_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': '√Çge modal du b√¢timent', 'Unit√©': ''},
    'COMMONAREA_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille modale de la zone commune', 'Unit√©': ''},
    'ELEVATORS_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre modal d\'ascenseurs', 'Unit√©': ''},
    'ENTRANCES_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre modal d\'entr√©es', 'Unit√©': ''},
    'FLOORSMAX_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre modal d\'√©tages maximum', 'Unit√©': ''},
    'FLOORSMIN_MEDI': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille m√©diane de l\'appartement', 'Unit√©': 'normalized'},
    'LANDAREA_MEDI': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Surface m√©diane du terrain', 'Unit√©': 'normalized'},
    'LIVINGAPARTMENTS_MEDI': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille m√©diane des appartements', 'Unit√©': 'normalized'},
    'LIVINGAREA_MEDI': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille m√©diane de la surface habitable', 'Unit√©': 'normalized'},
    'NONLIVINGAPARTMENTS_MEDI': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Nombre m√©dian d\'appartements non habitables', 'Unit√©': 'normalized'},
    'NONLIVINGAREA_MEDI': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Taille m√©diane de la zone non habitable', 'Unit√©': 'normalized'},
    'FONDKAPREMONT_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Mode de fonds de r√©novation', 'Unit√©': 'normalized'},
    'HOUSETYPE_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Mode de type de maison', 'Unit√©': 'normalized'},
    'TOTALAREA_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Mode de surface totale', 'Unit√©': 'normalized'},
    'WALLSMATERIAL_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Mode de mat√©riau des murs', 'Unit√©': 'normalized'},
    'EMERGENCYSTATE_MODE': {'Titre': 'Informations normalis√©es sur le b√¢timent o√π vit le client', 'Description': 'Mode d\'√©tat d\'urgence', 'Unit√©': 'normalized'},
    'OBS_30_CNT_SOCIAL_CIRCLE': {'Titre': 'Nombre d\'observations du cercle social du client avec un retard de paiement de 30 jours', 'Unit√©': ''},
    'DEF_30_CNT_SOCIAL_CIRCLE': {'Titre': 'Nombre d\'observations du cercle social du client avec d√©faut de paiement de 30 jours', 'Unit√©': ''},
    'OBS_60_CNT_SOCIAL_CIRCLE': {'Titre': 'Nombre d\'observations du cercle social du client avec un retard de paiement de 60 jours', 'Unit√©': ''},
    'DEF_60_CNT_SOCIAL_CIRCLE': {'Titre': 'Nombre d\'observations du cercle social du client avec d√©faut de paiement de 60 jours', 'Unit√©': ''},
    'DAYS_LAST_PHONE_CHANGE': {'Titre': 'Nombre de jours avant la demande o√π le client a chang√© de t√©l√©phone', 'Unit√©': 'Jours'},
    'FLAG_DOCUMENT_2': {'Titre': 'Le client a-t-il fourni le document 2', 'Unit√©': ''},
    'FLAG_DOCUMENT_3': {'Titre': 'Le client a-t-il fourni le document 3', 'Unit√©': ''},
    'FLAG_DOCUMENT_4': {'Titre': 'Le client a-t-il fourni le document 4', 'Unit√©': ''},
    'FLAG_DOCUMENT_5': {'Titre': 'Le client a-t-il fourni le document 5', 'Unit√©': ''},
    'FLAG_DOCUMENT_6': {'Titre': 'Le client a-t-il fourni le document 6', 'Unit√©': ''},
    'FLAG_DOCUMENT_7': {'Titre': 'Le client a-t-il fourni le document 7', 'Unit√©': ''},
    'FLAG_DOCUMENT_8': {'Titre': 'Le client a-t-il fourni le document 8', 'Unit√©': ''},
    'FLAG_DOCUMENT_9': {'Titre': 'Le client a-t-il fourni le document 9', 'Unit√©': ''},
    'FLAG_DOCUMENT_10': {'Titre': 'Le client a-t-il fourni le document 10', 'Unit√©': ''},
    'FLAG_DOCUMENT_11': {'Titre': 'Le client a-t-il fourni le document 11', 'Unit√©': ''},
    'FLAG_DOCUMENT_12': {'Titre': 'Le client a-t-il fourni le document 12', 'Unit√©': ''},
    'FLAG_DOCUMENT_13': {'Titre': 'Le client a-t-il fourni le document 13', 'Unit√©': ''},
    'FLAG_DOCUMENT_14': {'Titre': 'Le client a-t-il fourni le document 14', 'Unit√©': ''},
    'FLAG_DOCUMENT_15': {'Titre': 'Le client a-t-il fourni le document 15', 'Unit√©': ''},
    'FLAG_DOCUMENT_16': {'Titre': 'Le client a-t-il fourni le document 16', 'Unit√©': ''},
    'FLAG_DOCUMENT_17': {'Titre': 'Le client a-t-il fourni le document 17', 'Unit√©': ''},
    'FLAG_DOCUMENT_18': {'Titre': 'Le client a-t-il fourni le document 18', 'Unit√©': ''},
    'FLAG_DOCUMENT_19': {'Titre': 'Le client a-t-il fourni le document 19', 'Unit√©': ''},
    'FLAG_DOCUMENT_20': {'Titre': 'Le client a-t-il fourni le document 20', 'Unit√©': ''},
    'FLAG_DOCUMENT_21': {'Titre': 'Le client a-t-il fourni le document 21', 'Unit√©': ''},
    'AMT_REQ_CREDIT_BUREAU_HOUR': {'Titre': 'Nombre de demandes au bureau de cr√©dit une heure avant la demande du client', 'Unit√©': ''},
    'AMT_REQ_CREDIT_BUREAU_DAY': {'Titre': 'Nombre de demandes au bureau de cr√©dit un jour avant la demande du client (√† l\'exclusion d\'une heure avant la demande)', 'Unit√©': ''},
    'AMT_REQ_CREDIT_BUREAU_WEEK': {'Titre': 'Nombre de demandes au bureau de cr√©dit une semaine avant la demande du client (√† l\'exclusion d\'un jour avant la demande)', 'Unit√©': ''},
    'AMT_REQ_CREDIT_BUREAU_MON': {'Titre': 'Nombre de demandes au bureau de cr√©dit un mois avant la demande du client (√† l\'exclusion d\'une semaine avant la demande)', 'Unit√©': ''},
    'AMT_REQ_CREDIT_BUREAU_QRT': {'Titre': 'Nombre de demandes au bureau de cr√©dit trois mois avant la demande du client (√† l\'exclusion d\'un mois avant la demande)', 'Unit√©': ''},
    'AMT_REQ_CREDIT_BUREAU_YEAR': {'Titre': 'Nombre de demandes au bureau de cr√©dit un an avant la demande du client (√† l\'exclusion des trois derniers mois avant la demande)', 'Unit√©': ''}
}

correspondance_dict_bureau_info = {
    'SK_ID_CURR': {'Titre': 'ID Pr√™t', 'Description': 'ID du pr√™t dans notre √©chantillon', 'Unit√©': ''},
    'SK_BUREAU_ID': {'Titre': 'ID Cr√©dit Recod√©', 'Description': 'ID recod√© du cr√©dit pr√©c√©dent du Bureau de cr√©dit', 'Unit√©': ''},
    'CREDIT_ACTIVE': {'Titre': 'Statut Cr√©dit', 'Description': 'Statut des cr√©dits signal√©s par le Bureau de cr√©dit', 'Unit√©': ''},
    'CREDIT_CURRENCY': {'Titre': 'Devise Cr√©dit', 'Description': 'Devise recod√©e du cr√©dit du Bureau de cr√©dit', 'Unit√©': ''},
    'DAYS_CREDIT': {'Titre': 'Jours Avant Cr√©dit', 'Description': 'Jours avant la demande actuelle o√π le client a demand√© un cr√©dit au Bureau de cr√©dit', 'Unit√©': 'Jours'},
    'CREDIT_DAY_OVERDUE': {'Titre': 'Jours Retard Cr√©dit', 'Description': 'Nombre de jours de retard sur le cr√©dit du Bureau de cr√©dit au moment de la demande', 'Unit√©': 'Jours'},
    'DAYS_CREDIT_ENDDATE': {'Titre': 'Dur√©e Restante Cr√©dit', 'Description': 'Dur√©e restante du cr√©dit du Bureau de cr√©dit au moment de la demande chez Home Credit', 'Unit√©': 'Jours'},
    'DAYS_ENDDATE_FACT': {'Titre': 'Jours Depuis Fin Cr√©dit', 'Description': 'Jours depuis la fin du cr√©dit du Bureau de cr√©dit au moment de la demande chez Home Credit', 'Unit√©': 'Jours'},
    'AMT_CREDIT_MAX_OVERDUE': {'Titre': 'Max Retard Cr√©dit', 'Description': "Montant maximal de retard sur le cr√©dit du Bureau de cr√©dit jusqu'√† pr√©sent", 'Unit√©': 'Monnaie'},
    'CNT_CREDIT_PROLONG': {'Titre': 'Nombre Prolongations', 'Description': 'Nombre de fois o√π le cr√©dit du Bureau de cr√©dit a √©t√© prolong√©', 'Unit√©': ''},
    'AMT_CREDIT_SUM': {'Titre': 'Montant Cr√©dit Actuel', 'Description': 'Montant de cr√©dit actuel pour le cr√©dit du Bureau de cr√©dit', 'Unit√©': 'Monnaie'},
    'AMT_CREDIT_SUM_DEBT': {'Titre': 'Dette Actuelle', 'Description': 'Dette actuelle sur le cr√©dit du Bureau de cr√©dit', 'Unit√©': 'Monnaie'},
    'AMT_CREDIT_SUM_LIMIT': {'Titre': 'Limite Cr√©dit Actuelle', 'Description': 'Limite de cr√©dit actuelle de la carte de cr√©dit signal√©e au Bureau de cr√©dit', 'Unit√©': 'Monnaie'},
    'AMT_CREDIT_SUM_OVERDUE': {'Titre': 'Montant Actuel en Souffrance', 'Description': 'Montant actuel en souffrance sur le cr√©dit du Bureau de cr√©dit', 'Unit√©': 'Monnaie'},
    'CREDIT_TYPE': {'Titre': 'Type Cr√©dit', 'Description': 'Type de cr√©dit du Bureau de cr√©dit', 'Unit√©': ''},
    'DAYS_CREDIT_UPDATE': {'Titre': 'Jours Avant Mise √† Jour', 'Description': 'Jours avant la demande de pr√™t o√π la derni√®re information sur le cr√©dit du Bureau de cr√©dit a √©t√© mise √† jour', 'Unit√©': 'Jours'},
    'AMT_ANNUITY': {'Titre': 'Annuit√© Cr√©dit', 'Description': 'Annuit√© du cr√©dit du Bureau de cr√©dit', 'Unit√©': 'Monnaie'},
}

correspondance_dict_bureau_balance_info = {
    'SK_BUREAU_ID': {'Titre': 'ID Cr√©dit Recod√©', 'Description': 'ID recod√© du cr√©dit du Bureau de cr√©dit', 'Unit√©': ''},
    'MONTHS_BALANCE': {'Titre': 'Mois Solde', 'Description': 'Mois de solde par rapport √† la date de demande', 'Unit√©': ''},
    'STATUS': {'Titre': 'Statut Pr√™t', 'Description': 'Statut du pr√™t du Bureau de cr√©dit pendant le mois', 'Unit√©': ''},
}

correspondance_dict_previous_application_info = {
    'SK_ID_PREV': {'Titre': 'ID Cr√©dit Pr√©c√©dent', 'Description': 'Identifiant du cr√©dit pr√©c√©dent chez Home Credit', 'Unit√©': ''},
    'SK_ID_CURR': {'Titre': 'ID Pr√™t', 'Description': 'Identifiant du pr√™t dans notre √©chantillon', 'Unit√©': ''},
    'NAME_CONTRACT_TYPE': {'Titre': 'Type de Contrat', 'Description': 'Type de contrat de la demande pr√©c√©dente (pr√™t en esp√®ces, pr√™t √† la consommation [POS],...)', 'Unit√©': ''},
    'AMT_ANNUITY': {'Titre': 'Annuit√©', 'Description': "Montant de l'annuit√© de la demande pr√©c√©dente", 'Unit√©': 'Monnaie'},
    'AMT_APPLICATION': {'Titre': 'Montant Demand√©', 'Description': 'Montant demand√© lors de la demande pr√©c√©dente', 'Unit√©': 'Monnaie'},
    'AMT_CREDIT': {'Titre': 'Montant du Cr√©dit', 'Description': 'Montant final du cr√©dit accord√© lors de la demande pr√©c√©dente', 'Unit√©': 'Monnaie'},
    'AMT_DOWN_PAYMENT': {'Titre': 'Acompte', 'Description': "Montant de l'acompte lors de la demande pr√©c√©dente", 'Unit√©': 'Monnaie'},
    'AMT_GOODS_PRICE': {'Titre': 'Prix des Biens', 'Description': 'Prix des biens demand√©s lors de la demande pr√©c√©dente (si applicable)', 'Unit√©': 'Monnaie'},
    'WEEKDAY_APPR_PROCESS_START': {'Titre': 'Jour de D√©but du Traitement', 'Description': 'Jour de la semaine o√π le client a fait la demande pr√©c√©dente', 'Unit√©': ''},
    'HOUR_APPR_PROCESS_START': {'Titre': 'Heure de D√©but du Traitement', 'Description': 'Heure approximative o√π le client a fait la demande pr√©c√©dente', 'Unit√©': ''},
    'FLAG_LAST_APPL_PER_CONTRACT': {'Titre': 'Derni√®re Demande par Contrat', 'Description': "Drapeau indiquant si c'√©tait la derni√®re demande pour le contrat pr√©c√©dent", 'Unit√©': ''},
    'NFLAG_LAST_APPL_IN_DAY': {'Titre': 'Derni√®re Demande du Jour', 'Description': 'Drapeau indiquant si la demande √©tait la derni√®re de la journ√©e pour le client', 'Unit√©': ''},
    'NFLAG_MICRO_CASH': {'Titre': 'Micro Finance Loan', 'Description': 'Drapeau indiquant un pr√™t de microfinance', 'Unit√©': ''},
    'RATE_DOWN_PAYMENT': {'Titre': 'Taux d\'Acompte', 'Description': 'Taux d\'acompte normalis√© sur le cr√©dit pr√©c√©dent', 'Unit√©': ''},
    'RATE_INTEREST_PRIMARY': {'Titre': 'Taux d\'Int√©r√™t Primaire', 'Description': 'Taux d\'int√©r√™t normalis√© sur le cr√©dit pr√©c√©dent', 'Unit√©': ''},
    'RATE_INTEREST_PRIVILEGED': {'Titre': 'Taux d\'Int√©r√™t Privil√©gi√©', 'Description': 'Taux d\'int√©r√™t normalis√© privil√©gi√© sur le cr√©dit pr√©c√©dent', 'Unit√©': ''},
    'NAME_CASH_LOAN_PURPOSE': {'Titre': 'Objet du Pr√™t en Esp√®ces', 'Description': 'Objectif du pr√™t en esp√®ces lors de la demande pr√©c√©dente', 'Unit√©': ''},
    'NAME_CONTRACT_STATUS': {'Titre': 'Statut du Contrat', 'Description': 'Statut du contrat de la demande pr√©c√©dente (approuv√©, annul√©, ...)', 'Unit√©': ''},
    'DAYS_DECISION': {'Titre': "Jours jusqu'√† D√©cision", 'Description': "Nombre de jours avant la d√©cision par rapport √† la demande actuelle", 'Unit√©': 'Jours'},
    'NAME_PAYMENT_TYPE': {'Titre': 'M√©thode de Paiement', 'Description': 'M√©thode de paiement choisie par le client pour la demande pr√©c√©dente', 'Unit√©': ''},
    'CODE_REJECT_REASON': {'Titre': 'Raison du Rejet', 'Description': 'Raison du rejet de la demande pr√©c√©dente', 'Unit√©': ''},
    'NAME_TYPE_SUITE': {'Titre': 'Accompagnant lors de la Demande', 'Description': 'Personne accompagnant le client lors de la demande pr√©c√©dente', 'Unit√©': ''},
    'NAME_CLIENT_TYPE': {'Titre': 'Type de Client', 'Description': 'Ancien ou nouveau client lors de la demande pr√©c√©dente', 'Unit√©': ''},
    'NAME_GOODS_CATEGORY': {'Titre': 'Cat√©gorie des Biens', 'Description': 'Type de biens pour lesquels le client a demand√© dans la demande pr√©c√©dente', 'Unit√©': ''},
    'NAME_PORTFOLIO': {'Titre': 'Portefeuille', 'Description': 'Type de portefeuille pour la demande pr√©c√©dente (CASH, POS, CAR, ‚Ä¶)', 'Unit√©': ''},
    'NAME_PRODUCT_TYPE': {'Titre': 'Type de Produit', 'Description': 'Type de produit pour la demande pr√©c√©dente (x-sell ou walk-in)', 'Unit√©': ''},
    'CHANNEL_TYPE': {'Titre': 'Type de Canal', 'Description': 'Canal par lequel le client a √©t√© acquis lors de la demande pr√©c√©dente', 'Unit√©': ''},
    'SELLERPLACE_AREA': {'Titre': 'Zone de Vente du Vendeur', 'Description': 'Zone de vente du lieu du vendeur pour la demande pr√©c√©dente', 'Unit√©': ''},
    'NAME_SELLER_INDUSTRY': {'Titre': 'Industrie du Vendeur', 'Description': 'Industrie du vendeur pour la demande pr√©c√©dente', 'Unit√©': ''},
    'CNT_PAYMENT': {'Titre': 'Nombre de Paiements', 'Description': 'Terme du cr√©dit pr√©c√©dent au moment de la demande pr√©c√©dente', 'Unit√©': ''},
    'NAME_YIELD_GROUP': {'Titre': 'Groupe de Rendement', 'Description': "Taux d'int√©r√™t regroup√© en petits, moyens et grands du cr√©dit pr√©c√©dent", 'Unit√©': ''},
    'PRODUCT_COMBINATION': {'Titre': 'Combinaison de Produits', 'Description': 'Combinaison d√©taill√©e des produits pour la demande pr√©c√©dente', 'Unit√©': ''},
    'DAYS_FIRST_DRAWING': {'Titre': "Jours jusqu'√† la Premi√®re Lib√©ration", 'Description': 'Nombre de jours avant la premi√®re lib√©ration par rapport √† la demande actuelle', 'Unit√©': 'Jours'},
    'DAYS_FIRST_DUE': {'Titre': "Jours jusqu'√† la Premi√®re √âch√©ance", 'Description': 'Nombre de jours avant la premi√®re √©ch√©ance pr√©vue par rapport √† la demande actuelle', 'Unit√©': 'Jours'},
    'DAYS_LAST_DUE_1ST_VERSION': {'Titre': "Jours jusqu'√† la Premi√®re √âch√©ance (Version 1)", 'Description': 'Nombre de jours avant la premi√®re √©ch√©ance par rapport √† la demande actuelle (premi√®re version)', 'Unit√©': 'Jours'},
    'DAYS_LAST_DUE': {'Titre': "Jours jusqu'√† la Derni√®re √âch√©ance', 'Description': 'Nombre de jours avant la derni√®re √©ch√©ance par rapport √† la demande actuelle", 'Unit√©': 'Jours'},
    'DAYS_TERMINATION': {'Titre': "Jours jusqu'√† la R√©siliation Attendue", 'Description': 'Nombre de jours avant la r√©siliation attendue par rapport √† la demande actuelle', 'Unit√©': 'Jours'},
    'NFLAG_INSURED_ON_APPROVAL': {'Titre': 'Assurance Demand√©e', 'Description': 'Drapeau indiquant si le client a demand√© une assurance pendant la demande pr√©c√©dente', 'Unit√©': ''}
}


# Fonction pour afficher les informations sur le client
def afficher_informations_client(client_id):
    st.title("Page d'informations sur le client")
    st.subheader("Informations personnelles:")

    st.write(f"**ID du client :** {client_id}")

    try:
        # Affiche les informations sur le client
        response = requests.get(f"{api_url}/informations_client_brut/{client_id}")
        client_info = response.json()
        # Affiche les informations les plus importantes sur l'application
        if 'application_info' in client_info:
            afficher_informations_application(client_info['application_info'][0])

        # Affiche les informations sur le bureau
        if 'bureau_info' in client_info:
            afficher_informations_bureau(client_info['bureau_info'][0])

        # Affiche les informations sur les demandes pr√©c√©dentes
        if 'previous_application_info' in client_info:
            afficher_informations_previous_application(client_info['previous_application_info'][0])

        # Affiche d'autres informations dans une liste d√©roulante
        # afficher_informations_supplementaires(client_info)

    except Exception as e:
        st.error(f"Une erreur s'est produite : {e}")

# Fonction pour afficher les informations les plus importantes sur l'application
def afficher_informations_application(application_info):
    st.subheader("Informations g√©n√©rales:")

    # Liste des titres associ√©s aux cl√©s du dictionnaire
    titres_informations = [correspondance_dict_application_info[key]['Titre'] for key in correspondance_dict_application_info.keys()]

    # Liste d√©roulante pour choisir l'information
    choix_information = st.selectbox("Choisir une information:", titres_informations)

    # Trouver la cl√© correspondante dans application_info
    for key, value in correspondance_dict_application_info.items():
        if value['Titre'] == choix_information:
            cle_correspondante = key
            break

    # Afficher les donn√©es correspondantes
    st.write(f"Valeur : {application_info[cle_correspondante]}")
    st.write(f"Unit√© : {value.get('Unit√©', 'Aucune unit√© disponible')}")
    st.write(f"Description : {value.get('Description', 'Aucune description disponible')}")

# Fonction pour afficher les informations sur le bureau
def afficher_informations_bureau(bureau_info):
    st.subheader("Informations concernant les donn√©es des institutions financi√®res:")

    # Liste des titres associ√©s aux cl√©s du dictionnaire
    titres_informations = [correspondance_dict_bureau_info[key]['Titre'] for key in correspondance_dict_bureau_info.keys()]

    # Liste d√©roulante pour choisir l'information
    choix_information = st.selectbox("Choisir une information:", titres_informations)

    # Trouver la cl√© correspondante dans application_info
    for key, value in correspondance_dict_bureau_info.items():
        if value['Titre'] == choix_information:
            cle_correspondante = key
            break

    # Afficher les donn√©es correspondantes
    st.write(f"Valeur : {bureau_info[cle_correspondante]}")
    st.write(f"Unit√© : {value.get('Unit√©', 'Aucune unit√© disponible')}")
    st.write(f"Description : {value.get('Description', 'Aucune description disponible')}")


# Fonction pour afficher les informations sur les demandes pr√©c√©dentes
def afficher_informations_previous_application(previous_application_info):
    st.subheader("Informations sur les anciennes demandes:")
    # Liste des titres associ√©s aux cl√©s du dictionnaire
    titres_informations = [correspondance_dict_previous_application_info[key]['Titre'] for key in correspondance_dict_previous_application_info.keys()]

    # Liste d√©roulante pour choisir l'information
    choix_information = st.selectbox("Choisir une information:", titres_informations)

    # Trouver la cl√© correspondante dans application_info
    for key, value in correspondance_dict_previous_application_info.items():
        if value['Titre'] == choix_information:
            cle_correspondante = key
            break
        

    # Afficher les donn√©es correspondantes
    st.write(f"Information s√©lectionn√©e : {choix_information}")
    st.write(f"Valeur : {previous_application_info[cle_correspondante]}")
    st.write(f"Description : {value.get('Description', 'Aucune description disponible')}")
    st.write(f"Unit√© : {value.get('Unit√©', 'Aucune unit√© disponible')}")

# Fonction pour afficher les informations sur le POS_CASH_balance
def afficher_informations_pos_cash_balance(pos_cash_balance_info):
    st.subheader("POS_CASH_balance_info:")
    for entry in pos_cash_balance_info:
        st.write(entry)


# Fonction pour afficher les informations sur les paiements par carte de cr√©dit
def afficher_informations_credit_card_balance(credit_card_balance_info):
    st.subheader("Credit Card Balance Info:")
    st.write(credit_card_balance_info)

# Fonction pour afficher les informations sur les paiements d'acomptes
def afficher_informations_installments_payments(installments_payments_info):
    st.subheader("Installments Payments Info:")
    for entry in installments_payments_info:
        st.write(entry)



# Fonction pour afficher des informations suppl√©mentaires dans une liste d√©roulante
def afficher_informations_supplementaires(client_info):
    st.subheader("Informations suppl√©mentaires:")
    with st.expander("Plus d'informations"):
        # Afficher les informations sur le POS_CASH_balance
        if 'POS_CASH_balance_info' in client_info:
            afficher_informations_pos_cash_balance(client_info['POS_CASH_balance_info'])

        # Afficher les informations sur le bureau
        if 'bureau_info' in client_info:
            afficher_informations_bureau(client_info['bureau_info'])

        # Afficher les informations sur les paiements par carte de cr√©dit
        if 'credit_card_balance_info' in client_info:
            afficher_informations_credit_card_balance(client_info['credit_card_balance_info'])

        # Afficher les informations sur les paiements d'acomptes
        if 'installments_payments_info' in client_info:
            afficher_informations_installments_payments(client_info['installments_payments_info'])

# Si l'ID client est d√©fini, affiche les informations sur le client
if client_id:
    afficher_informations_client(client_id)

else:
    st.write('Merci de vouloir indiquer un ID client dans "Recherche client".')

# To do -> mettre que les infos les plus importantes puis liste d√©roulante pour les autres ? 
# essayer d'afficher les informations pr√©cises avec des JSON
#         response = requests.get(f"{api_url}/predict/{client_id}")
# Finir d'afficher les informations bien + mettre les informations relatigves √† la demande de pr√™t dans l'autre onglet 
# pret sur autre onglet et faire requete dans recherche ? puis enregistrer en variables globale 

